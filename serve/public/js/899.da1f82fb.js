"use strict";(self["webpackChunkelement_war"]=self["webpackChunkelement_war"]||[]).push([[899],{6899:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var s=a(3396),l=a(7139),n=a(9242);const r={class:"game-lobby"},o={class:"players"},i={class:"crown"},c={class:"username"},d={class:"count-down"};function p(e,t,a,p,y,u){const h=(0,s.up)("LogPlane");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.playerList,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["item",u.playerStyles(e)]),key:t},[(0,s.wy)((0,s._)("div",i,"√",512),[[n.F8,e.ready]]),(0,s._)("div",c,(0,l.zw)(e.username),1)],2)))),128))]),(0,s._)("div",{class:"play",onClick:t[0]||(t[0]=(...e)=>u.onPlay&&u.onPlay(...e))},(0,l.zw)(u.playText),1),(0,s._)("div",d,(0,l.zw)(y.countDown||y.logo),1),(0,s._)("div",{class:"log",onClick:t[1]||(t[1]=e=>y.isLogPlane=!0)},"- DEVELOPER LOG -"),(0,s.Wm)(h,{show:y.isLogPlane,onBack:t[2]||(t[2]=()=>y.isLogPlane=!1)},null,8,["show"])])}var y=a(4806),u=a(65);const h={class:"wrapper"},w={class:"type"},g={class:"date"},v={class:"content"};function m(e,t,a,r,o,i){return(0,s.wg)(),(0,s.j4)(n.uT,{name:"slideUp"},{default:(0,s.w5)((()=>[a.show?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"log-plane",onClick:t[0]||(t[0]=(0,n.iM)((t=>e.$emit("back")),["self"]))},[(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.log,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"tabs",key:t},[(0,s._)("div",w,(0,l.zw)(i.replaceTypeText(t)),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.reverse(),((e,a)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"log",key:a},[(0,s._)("div",g,(0,l.zw)(e.date),1),(0,s._)("div",v,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.content,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"text",key:t},(0,l.zw)(t+1)+". "+(0,l.zw)(e),1)))),128))])])),[[n.F8,o.type===t]]))),128))])))),128))])])):(0,s.kq)("",!0)])),_:1})}var D={name:"LogPlane",data(){return{type:"update"}},props:["show"],methods:{replaceTypeText(e){return{update:"更新日志"}[e]}},computed:{...(0,u.rn)(["log"])}},k=a(89);const _=(0,k.Z)(D,[["render",m],["__scopeId","data-v-7a78989d"]]);var L=_,f={name:"GameLobby",data(){return{logo:"WAR",countDown:0,isLogPlane:!1}},computed:{...(0,u.rn)(["players","player","checkerBoard","controller"]),playText(){let e="READY";return 1===this.players.length&&(e="等待玩家加入"),this.player.ready&&(e="READIED"),e},playerList(){let e=[].concat(this.players),t=this.checkerBoard.playerNumber-this.players.length;return(0,y.times)(t,(()=>e.push({}))),e}},methods:{playerStyles(e){return{own:this.player.id===e.id,block:!e.id}},onPlay(){1!==this.players.length&&(this.player.ready?this.$send("cancel ready",this.player.id):this.$send("ready",this.player.id))}},watch:{players:{handler(){let e;if("start"===this.controller.status)return this.$router.push("/");(0,y.every)(this.players,"ready")&&this.players.length>=2?(this.countDown=5,e=setInterval((()=>{this.countDown<=1?(clearInterval(e),this.$router.push("/")):this.countDown--}),1e3)):(this.countDown=0,clearInterval(e))},deep:!0,immediate:!0}},components:{LogPlane:L}};const P=(0,k.Z)(f,[["render",p],["__scopeId","data-v-d344fac8"]]);var b=P}}]);